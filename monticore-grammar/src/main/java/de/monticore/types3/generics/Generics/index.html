<!-- (c) https://github.com/MontiCore/monticore -->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://monticore.github.io/monticore/monticore-grammar/src/main/java/de/monticore/types3/generics/Generics/">
      
      
      
      
      <link rel="icon" href="../../../../../../../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.2">
    
    
      
        <title>Generics - MontiCore</title>
      
    
    
      <link rel="stylesheet" href="../../../../../../../../../assets/stylesheets/main.d7758b05.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['disableCookies']);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="https://stats.fh-aachen.de/";
      _paq.push(['setTrackerUrl', u+'piwik.php']);
      _paq.push(['setSiteId', '35']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#given-infrastructure-in-monticore-wrt-type-inference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../../../../../.." title="MontiCore" class="md-header__button md-logo" aria-label="MontiCore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h176l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32h256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-69.3L336 416h176c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm448 64v224H64V64z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MontiCore
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Generics
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/MontiCore/monticore/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../../../../docs/GettingStarted/" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../grammars/de/monticore/Grammars/" class="md-tabs__link">
          
  
  Core Grammars

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../../../../docs/DevelopedLanguages/" class="md-tabs__link">
          
  
  Languages

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../../../../docs/BestPractices/" class="md-tabs__link">
        
  
    
  
  Best Practices

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../../../../00.org/Explanations/CHANGELOG/" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../../../../docs/Download/" class="md-tabs__link">
        
  
    
  
  Downloads

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../../../../docs/Publications/" class="md-tabs__link">
        
  
    
  
  Publications

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../../../../00.org/Licenses/LICENSE-MONTICORE-3-LEVEL/" class="md-tabs__link">
        
  
    
  
  License

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../../../../.." title="MontiCore" class="md-nav__button md-logo" aria-label="MontiCore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h176l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32h256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-69.3L336 416h176c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm448 64v224H64V64z"/></svg>

    </a>
    MontiCore
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/MontiCore/monticore/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../../docs/GettingStarted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core Grammars
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Core Grammars
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../grammars/de/monticore/Grammars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../grammars/de/monticore/expressions/Expressions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../grammars/de/monticore/literals/Literals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Literals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../grammars/de/monticore/types/Types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Languages
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Languages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../../docs/DevelopedLanguages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Languages and Language Components
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../../docs/Languages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    List of Languages
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../../docs/BestPractices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../../00.org/Explanations/CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../../docs/Download/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downloads
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../../docs/Publications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publications
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../../../00.org/Licenses/LICENSE-MONTICORE-3-LEVEL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Generics</h1>

<!-- (c) https://github.com/MontiCore/monticore -->

<!-- Alpha-version: This is intended to become a MontiCore stable explanation. -->

<p>This is an extension of the
<a href="../../TypeSystem3/">TypeSystem3 documentation</a>
focusing on the support of generics.</p>
<p>A generic type is a type which contains type parameters.
For example, <code>List&lt;T&gt;</code> is a generic type with the name <code>List</code>
and one type parameter <code>T</code>.
A generic type cannot be used in a model directly!
Instead, it needs to be instantiated by providing type arguments.
<code>List&lt;int&gt;</code> is an instantiation of the generic type <code>List&lt;T&gt;</code>,
and as such can be used in a model as, e.g., the type of a variable.
In other words, generic types are type-level functions,
that map a non-empty list of types to a new type.</p>
<p>For MCTypes, the type arguments have to be provided explicitly,
as with <code>List&lt;int&gt;</code>.
That is not the case for expressions;
<code>[]</code> is an expression that returns an empty <code>List</code>.
The type argument is implicitly inferred by using information
of the context the expression is used in.
An Example:</p>
<div class="highlight"><pre><span></span><code>List&lt;Person&gt; persons = [];
List&lt;Car&gt; cars = [];
</code></pre></div>
<p>For <code>persons</code> a <code>List&lt;Person&gt;</code> is expected.
<code>List&lt;Person&gt;</code> is the <em>target type</em> of the expression <code>[]</code>.
Therefore, (in languages that have side effects) the type argument
must be <code>Person</code>, thus resulting in the type <code>List&lt;Person&gt;</code> for <code>[]</code>.
The same goes for <code>cars</code>; Here, the type argument is required to be <code>Car</code>.
As can be seen, the same expression can have different types
depending on the context the expression is used in.</p>
<p>The implicit type arguments are inferred for</p>
<ul>
<li>checking the type-correctness of the expression</li>
<li>providing additional information for potential CoCos</li>
<li>providing additional information for code generators</li>
</ul>
<p>To this end, MontiCore provides a type inference algorithm.</p>
<h2 id="given-infrastructure-in-monticore-wrt-type-inference">Given infrastructure in MontiCore wrt. Type Inference</h2>
<ul>
<li><a href="../TypeParameterRelations.java">TypeParameterRelations</a>
  (relations over SymTypeExpressions wrt. generics, e.g., hasWildcards)</li>
<li><a href="../constraints/Constraint.java">Constraint</a>
  (statements over SymTypeExpression that have to hold
  for inference to succeed. Leads to Bounds.)<ul>
<li><a href="../constraints/SubTypingConstraint.java">SubTypingConstraint</a>
  (e.g., <code>&lt;Student &lt;: Person&gt;</code>: one SymTypeExpression needs to be
  the subtype of another SymTypeExpression)</li>
<li><a href="../constraints/TypeEqualityConstraint.java">TypeEqualityConstraint</a>
  (e.g., <code>&lt;List&lt;FV#0&gt; = List&lt;Person&gt;&gt;</code>: two SymTypeExpression need to be
  the same)</li>
<li><a href="../constraints/TypeCompatibilityConstraint.java">TypeCompatibilityConstraint</a>
  (e.g., <code>&lt;int --&gt; FV#0&gt;</code>: one SymTypeExpression needs to be compatible
  to another SymTypeExpression)</li>
<li><a href="../constraints/ExpressionCompatibilityConstraint.java">ExpressionCompatibilityConstraint</a>
  (e.g., <code>&lt;Expression --&gt; float&gt;</code>: the SymTypeExpression of an expression
  needs to be compatible to another SymTypeExpression)</li>
<li><a href="../constraints/BoundWrapperConstraint.java">BoundWrapperConstraint</a>
  (e.g., <code>&lt;Bound: FV#0 = int&gt;</code>: a Bound in place of a Constraint)</li>
</ul>
</li>
<li><a href="../bounds/Bound.java">Bound</a>
  (limits the range of inference variables, intermediate result of inference)<ul>
<li><a href="../bounds/SubTypingBound.java">SubTypingBound</a>
  (e.g., <code>FV#0 &lt;: Person</code>: represents a variable to be
  a subtype/supertype of a SymTypeExpression)</li>
<li><a href="../bounds/TypeEqualityBound.java">TypeEqualityBound</a>
  (e.g., <code>FV#0 = int</code>: represents a variable being a SymTypeExpression)</li>
<li><a href="../bounds/CaptureBound.java">CaptureBound</a>
  (e.g., <code>List&lt;CAP#1&gt; = capture(List&lt;FV#0&gt;)</code>: represents that
  capture conversion needs to be done later)</li>
<li><a href="../bounds/UnsatisfiableBound.java">UnsatisfiableBound</a>
  (<code>unsatisfiable</code>: represents that no instantiation can be found)</li>
</ul>
</li>
<li>Bounds and Constraints:<ul>
<li><a href="../util/ConstraintReduction.java">ConstraintReduction</a>
  (takes Constraints and reduces them to Bounds)</li>
<li><a href="../util/BoundIncorporation.java">BoundIncorporation</a>
  (takes Bounds and finds new Constraints)</li>
<li><a href="../util/BoundResolution.java">BoundResolution</a>
  (takes Bounds and resolves instantiations)</li>
</ul>
</li>
<li><a href="../context/InferenceContext4Ast.java">InferenceContext4Ast</a>
  (maps ASTNodes to SymTypeExpressions, filled by the TypeVisitors)<ul>
<li><a href="../context/InferenceContext.java">InferenceContext</a>
  (stores information required for inference for one ASTNode)</li>
<li><a href="../context/InferenceResult.java">InferenceResult</a>
  (stores partial results of inference)</li>
<li><a href="../context/InferenceVisitorMode.java">InferenceVisitorMode</a>
  (the mode the type visitor is in,
  this changes the expected behavior wrt. inference)</li>
</ul>
</li>
<li><a href="../util/CompileTimeTypeCalculator.java">CompileTimeTypeCalculator</a>
  (handles type inference for most visitors. Requires the inference problem
  to be representable as a function call.)</li>
<li>CTTIVisitors are TypeVisitors extended with type inference,
  they only exist for expressions<ul>
<li><a href="../../../expressions/assignmentexpressions/types3/AssignmentExpressionsCTTIVisitor.java">AssignmentExpressionsCTTIVisitor</a>
  (calculates the SymTypeExpressions for the expressions
  in the grammar AssignmentExpressions)</li>
<li><a href="../../../expressions/commonexpressions/types3/CommonExpressionsCTTIVisitor.java">CommonExpressionsCTTIVisitor</a>
  (calculates the SymTypeExpressions for the expressions
  in the grammar CommonExpressions)</li>
<li><a href="../../../expressions/expressionsbasis/types3/ExpressionBasisCTTIVisitor.java">ExpressionsBasisCTTIVisitor</a>
  (calculates the SymTypeExpressions for the expressions
  in the grammar ExpressionBasis)</li>
<li><a href="../../../ocl/setexpressions/types3/SetExpressionsCTTIVisitor.java">SetExpressionsCTTIVisitor</a>
  (calculates the SymTypeExpressions for the expressions
  in the grammar SetExpressions)</li>
<li><a href="../../../expressions/uglyexpressions/types3/UglyExpressionsCTTIVisitor.java">UglyExpressionsCTTIVisitor</a>
  (calculates the SymTypeExpressions for the expressions
  in the grammar UglyExpressions)</li>
</ul>
</li>
</ul>
<h2 id="extended-symtypeexpression-world">Extended SymTypeExpression World</h2>
<p>When adding generics support, one can encounter new SymTypeExpressions;
First of all, there is
<a href="../../../types/check/SymTypeOfGenerics.java">SymTypeOfGenerics</a>,
which directly corresponds to
<a href="../../../types/check/SymTypeOfObject.java">SymTypeOfObject</a>
and represents an object type with type arguments,
e.g., <code>List&lt;int&gt;</code> (s. above),</p>
<p><a href="../../../types/check/SymTypeOfFunction.java">SymTypeOfFunction</a>
does not have a corresponding, e.g., SymTypeOfGenericFunction;
Instead, type arguments are calculated by comparing the
SymTypeOfFunction with the function defined by the FunctionSymbol.
S. <code>SymtypeOfFunction::getTypeArguments()</code>.</p>
<p>There are further types that can be encountered.
Types printed with a <code>#</code> are types that are used internally during
type calculations but cannot be explicitly used in a model.
As such, a modeler may only ever encounter them in error messages.</p>
<p><code>"FV#{number}"</code> (and <code>CAP#{number}</code>, etc.) represent inference variables
(free type variables).
They are used in place of the actual type arguments,
until their instantiations are calculated using bounds.</p>
<p><code>#TOP</code> (commonly written as ⊤) represents the top type,
the type that is the supertype of all types.
It is used internally to represent that there is no upper bound
that limits the set of types an inference variable can be instantiated to.
Example: <code>&lt;T&gt; T f()</code> here, the type variable <code>T</code> is has no upper bound
and a corresponding inference variable would use <code>#TOP</code> to represent this.</p>
<p>Inference variables <em>can</em> be instantiated to <code>#TOP</code> in specific circumstances;
The return type of <code>f</code> in the statement <code>f();</code> has no bounds,
it can be any type. As such, <code>#TOP</code> is used to represent this.
More often than not, a type of <code>#TOP</code> suggests that a type/function
has not been used "to their full potential":
* some information goes unused (for <code>f</code> it is the return value), or
* e.g., in the comparison of an empty List and Set <code>[] == {}</code>
  the potential to store values in the collections goes unused.</p>
<p><code>#BOTTOM</code> (commonly written as ⊥) represents the bottom type,
the type that is the subtype of all types.
Analogue to <code>#TOP</code>, <code>#BOTTOM</code> represents
the lack of a more specific lower bound.
<code>#BOTTOM</code> has no values.
Inference variables are never instantiated to <code>#BOTTOM</code>.</p>
<h2 id="how-to-get-the-type-of-an-astnode-with-generics">How to get the type of an ASTNode with generics?</h2>
<p>Note: This is an extension of the
<a href="../../TypeSystem3/#how-to-get-the-type-of-an-astnode">general documentation</a>,
which you should read first.</p>
<p>When calculating types in a language with support for generics,
additional steps have to be taken, due to the inference algorithm</p>
<ul>
<li>using different visitors (not necessarely, but that is usually the case)</li>
<li>needing to store additional information for ASTNodes,</li>
<li>and requiring access to the target types of expressions,</li>
</ul>
<p>The additional information will be stored in the
<a href="../context/InferenceContext4Ast.java">InferenceContext4Ast</a>
that is shared between all visitors.</p>
<p>The visitors supporting type inference, so far they exist,
are usually called CTTIVisitors,
for "(extended) <strong>c</strong>ompile-<strong>t</strong>ime <strong>t</strong>ype <strong>i</strong>nference".</p>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="n">MyLangTraverser</span><span class="w"> </span><span class="n">traverser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyLang</span><span class="p">.</span><span class="na">traverser</span><span class="p">();</span>
<span class="n">Type4Ast</span><span class="w"> </span><span class="n">type4Ast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Type4Ast</span><span class="p">();</span>
<span class="n">InferenceContext4Ast</span><span class="w"> </span><span class="n">ctx4Ast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InferenceContext4Ast</span><span class="p">();</span>

<span class="c1">// one of many type visitors</span>
<span class="n">SetExpressionsCTTIVisitor</span><span class="w"> </span><span class="n">visSetExpressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SetExpressionsCTTIVisitor</span><span class="p">();</span>
<span class="n">visSetExpressions</span><span class="p">.</span><span class="na">setType4Ast</span><span class="p">(</span><span class="n">type4Ast</span><span class="p">);</span>
<span class="n">visSetExpressions</span><span class="p">.</span><span class="na">setContext4Ast</span><span class="p">(</span><span class="n">ctx4Ast</span><span class="p">);</span>
<span class="n">traverser</span><span class="p">.</span><span class="na">add4SetExpressions</span><span class="p">(</span><span class="n">visSetExpressions</span><span class="p">);</span>
<span class="c1">// due to more complex traversal during type inference,</span>
<span class="c1">// most CTTIVisitors need to control the order of traversal</span>
<span class="n">traverser</span><span class="p">.</span><span class="na">setSetExpressionsHandler</span><span class="p">(</span><span class="n">visSetExpressions</span><span class="p">);</span>

<span class="c1">// create the TypeCheck3 delegate</span>
<span class="k">new</span><span class="w"> </span><span class="n">MapBasedTypeCheck3</span><span class="p">(</span><span class="n">traverser</span><span class="p">,</span><span class="w"> </span><span class="n">type4Ast</span><span class="p">,</span><span class="w"> </span><span class="n">ctx4Ast</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">setThisAsDelegate</span><span class="p">();</span>
</code></pre></div></p>
<p>Again, after initializing the TypeCheck3 delegate,
TypeCheck3 can be used to query SymTypeExpressions of expressions
<code>TypeCheck3.typeOf(expr)</code>,
as well as MCTypes
<code>TypeCheck3.symTypeFromAST(mcType)</code>.
However, for the expressions,
the target types are required, as far as they exist.
To pass this information to TypeCheck3,
the function <code>TypeCheck3.typeOf(expr, targetType)</code> can be used.
This, in addition to calculating the type of <code>expr</code>,
stores the target type information;
Any subsequent call to <code>TypeCheck3.typeOf(expr)</code> will have the type
according to the target type information stored by the first call.
This data is stored, as there are circumstances there the target type
information is not available (e.g., inside some CoCos).</p>
<p>It holds that
* Each ASTExpression has exactly one target type
* Each ASTExpression has exactly one type.
  In the case of a language with variability, special care has to be taken to
    * either reset the value cache accordingly,
    * or clone the ASTExpression
* The call to <code>TypeCheck3.typeOf</code> <em>with</em> the target type has to be the first.
  It is recommended to split the post-symbol-table-creation CoCos
  into two groups
    1. The group of CoCos that provide the target type information
    2. The group of CoCos that cannot provide the information,
       they must run after the CoCos of the first group</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      (c) https://github.com/MontiCore/monticore
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../../../../../..", "features": ["navigation.tabs", "toc.integrate", "toc.follow", "content.tabs.link", "content.code.copy"], "search": "../../../../../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../../../../../assets/javascripts/bundle.f13b1293.min.js"></script>
      
    
  </body>
</html>