/* (c) https://github.com/MontiCore/monticore */
import de.monticore.MCTask
import org.gradle.api.tasks.testing.logging.TestExceptionFormat
import org.gradle.api.tasks.testing.logging.TestLogEvent
plugins {
  id "monticore" version "$version" // MontiCore Plugin
  id "jacoco"
}

subprojects {
  apply plugin: 'monticore'
  apply plugin: 'jacoco'
  
  ext.grammarDir = 'src/main/grammars'
  ext.outDir = "$buildDir/generated-sources/monticore/sourcecode"
  
  dependencies {
    implementation "de.se_rwth.commons:se-commons-logging:$se_commons_version"
    implementation "de.se_rwth.commons:se-commons-utilities:$se_commons_version"
    implementation "org.antlr:antlr4-runtime:$antlr_version"
    implementation project(':monticore-runtime')
    implementation project(':monticore-grammar')
    grammar (project(path: ':monticore-grammar')){
      capabilities {
        requireCapability("de.monticore:monticore-grammar-grammars")
      }
    }
    testImplementation group:'ch.qos.logback', name: 'logback-classic', version: '1.1.2'
    testImplementation group:'junit', name:'junit', version:junit_version
  }
  
  sourceSets {
    main.java.srcDirs += [ outDir ]
  }
  
  compileJava {
    dependsOn project.collect { it.tasks.withType(MCTask) }
  }

}

jar.enabled = false
sourcesJar.enabled = false
