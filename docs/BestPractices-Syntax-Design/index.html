<!-- (c) https://github.com/MontiCore/monticore -->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://monticore.github.io/monticore/docs/BestPractices-Syntax-Design/">
      
      
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.2">
    
    
      
        <title>BestPractices Syntax Design - MontiCore</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d7758b05.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['disableCookies']);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="https://stats.fh-aachen.de/";
      _paq.push(['setTrackerUrl', u+'piwik.php']);
      _paq.push(['setSiteId', '35']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#monticore-best-practices-concrete-and-abstract-syntax" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MontiCore" class="md-header__button md-logo" aria-label="MontiCore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h176l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32h256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-69.3L336 416h176c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm448 64v224H64V64z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MontiCore
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              BestPractices Syntax Design
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/MontiCore/monticore/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../GettingStarted/" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../monticore-grammar/src/main/grammars/de/monticore/Grammars/" class="md-tabs__link">
          
  
  Core Grammars

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../DevelopedLanguages/" class="md-tabs__link">
          
  
  Languages

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../BestPractices/" class="md-tabs__link">
        
  
    
  
  Best Practices

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../00.org/Explanations/CHANGELOG/" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Download/" class="md-tabs__link">
        
  
    
  
  Downloads

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Publications/" class="md-tabs__link">
        
  
    
  
  Publications

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../00.org/Licenses/LICENSE-MONTICORE-3-LEVEL/" class="md-tabs__link">
        
  
    
  
  License

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MontiCore" class="md-nav__button md-logo" aria-label="MontiCore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h176l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32h256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-69.3L336 416h176c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm448 64v224H64V64z"/></svg>

    </a>
    MontiCore
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/MontiCore/monticore/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GettingStarted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core Grammars
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Core Grammars
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monticore-grammar/src/main/grammars/de/monticore/Grammars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monticore-grammar/src/main/grammars/de/monticore/expressions/Expressions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Expressions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monticore-grammar/src/main/grammars/de/monticore/literals/Literals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Literals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../monticore-grammar/src/main/grammars/de/monticore/types/Types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Languages
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Languages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DevelopedLanguages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Languages and Language Components
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Languages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    List of Languages
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../BestPractices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00.org/Explanations/CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Download/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downloads
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Publications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publications
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00.org/Licenses/LICENSE-MONTICORE-3-LEVEL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<!-- (c) https://github.com/MontiCore/monticore -->

<h1 id="monticore-best-practices-concrete-and-abstract-syntax">MontiCore Best Practices - Concrete and Abstract Syntax</h1>
<p><a href="https://www.monticore.de">MontiCore</a> provides a number of options to design 
languages, access and modify the abstract syntax tree, and produce output files.</p>
<p>This (currently unsorted and evolving) list of practices discusses solutions 
that we identified and applied as well as alternatives and their specific 
advantages and drawbacks. The list also mentions where the solutions have been
found and where they have been applied first.</p>
<p>This file is partially temporary and also contains compact (incomplete) solutions.
More detailed descriptions of best practices can be found in the 
<a href="https://www.monticore.de/handbook.pdf">MontiCore handbook</a>.
Some of the best practices here will also be incorporated in the next version
of the reference manual.</p>
<h2 id="designing-concrete-and-abstract-syntax"><strong>Designing Concrete and Abstract Syntax</strong></h2>
<h3 id="specific-keywords-that-shall-be-used-as-normal-names-elsewhere"><strong>Specific keywords</strong> that shall be used as normal names elsewhere</h3>
<ul>
<li><code>A = "foo" B</code> introduces <code>foo</code> as a keyword that cannot be used as an ordinary 
  (variable) name anymore. To prevent that we may use:</li>
<li><code>A = key("foo") B</code> instead, which introduces <code>foo</code> only at that specific point.</li>
<li>In general, we use all Java keywords as permanent, but abstain from other
  permanent keywords, especially if they are only used for a specific purpose in a composable
  sublanguage, like <code>in</code> in the OCL.</li>
<li>Defined by: BR</li>
</ul>
<h3 id="complex-token-clashing-with-other-uses-of-sub-tokens"><strong>Complex Token</strong> clashing with other uses of sub-tokens</h3>
<ul>
<li>For example <code>&lt;-</code> is supposed to be used as arrow, but in an expression
  <code>3&lt;-10</code> is also syntactically allowed.</li>
<li>The problem: as soon as <code>"&lt;-"</code> is defined as a token in any part of the
  current or any extended grammars, the expression <code>3&lt;-10</code> would not be
  parsed as <code>3 &lt; -10</code> anymore.</li>
<li>Solutions:  <ol>
<li>We might decompose the token to <code>"&lt;" "-"</code> which in its consequence 
 means that we put more burden to the context-free parser and less to the 
 regular scanner. ("scannerless parsing")  <ul>
<li>Drawback: spaces would now be allowed inbetween.</li>
</ul>
</li>
<li>Decompose the token to <code>{noSpace(2)}? "&lt;" "-"</code>. This (slightly
 hacking approach) prevents spaces between two tokens.  </li>
</ol>
</li>
<li>The challenge: when designing a language component, we don't know yet
  what further uses will bring. This may include sub-tokens to come up
  with new interactions. This would require an (already defined) grammar 
  with the complex token to be adapted afterwards (and thus conflict 
  with the library idea). </li>
<li>Remark: A forthcoming enhancement will provide an improved solution,
  keeping parsing efficiency and compositionality of grammars.</li>
<li>Defined by: BR</li>
</ul>
<h3 id="extension-forms-in-a-component-grammar"><strong>Extension</strong> forms in a  component grammar</h3>
<p>A component grammar is meant for extension. MontiCore therefore provides five(!) 
mechanisms that can be used when a sub-grammar shall extend a super-grammar. 
The solutions are briefly discussed here:  </p>
<h4 id="1-interface-in-the-super-grammar">1. Interface in the super-grammar</h4>
<ul>
<li>Introduce an interface and allow building of sub-nonterminals in sub-grammars.<br />
<div class="highlight"><pre><span></span><code>component grammar A {  
  interface X;
  N = &quot;bla&quot; X &quot;blubb&quot;;
}
grammar B extends A {
  Y implements X = &quot;specific&quot; &quot;thing&quot;
}
</code></pre></div></li>
<li>Advantage: Multiple extensions are possible at the same time.
  An NT <code>Y</code> can also implement multiple interfaces (like in Java). </li>
<li>Disadvantage: the designer of <code>A</code> explicitly has to design the <em>hole</em> 
 (extension point) <code>X</code> and add it into the production.  </li>
</ul>
<h4 id="2-overriding-empty-nonterminal-from-the-super-grammar">2. Overriding (empty) nonterminal from the super-grammar</h4>
<ul>
<li>Use a normal nonterminal <code>X</code> and override it in a sub-grammar.<br />
<div class="highlight"><pre><span></span><code>component grammar A {  
  X = &quot;&quot;;
  N = &quot;bla&quot; X &quot;blubb&quot;;
}
grammar B extends A {
  @Override
  X = &quot;my&quot; &quot;thing&quot;;
}
</code></pre></div></li>
<li>Advantage: <em>Default</em> implementation "" exists, no explicit filling needed.</li>
<li>Disadvantage: <ol>
<li>The designer of <code>A</code> explicitly has to design the <em>hole</em> (extension point) <code>X</code> 
   and inject it into other places. </li>
<li>Only one overriding alternative possible (i.e. multiple overriding in 
    subgrammars are allowed, but only the most specific resides).  </li>
</ol>
</li>
</ul>
<h4 id="3-extending-nonterminal-from-the-super-grammar">3. Extending nonterminal from the super-grammar.</h4>
<ul>
<li>Use an empty normal nonterminal <code>X</code> and extend it in a sub-grammar.
<div class="highlight"><pre><span></span><code>component grammar A {  
  X = ;
  N = &quot;bla&quot; X &quot;blubb&quot;;
}
grammar B extends A {
  Y extends X = &quot;this&quot;;
}
</code></pre></div></li>
<li>Advantage: <em>Default</em> implementation "" exists, no explicit filling needed.</li>
<li>Disadvantage: 
        The designer of <code>A</code> explicitly has to design the <em>hole</em> (extension point) <code>X</code> 
        and inject it into other places. </li>
<li>Care: Extension still allows the (empty) alternative <code>X</code>.  </li>
</ul>
<h4 id="4-using-external-nonterminals-in-the-super-grammar">4. Using <code>external</code> nonterminals in the super-grammar.</h4>
<ul>
<li>
<p>Mark nonterminal <code>X</code> as external.
<div class="highlight"><pre><span></span><code>component grammar A {  
  external X;
  N = &quot;bla&quot; X &quot;blubb&quot;;
}
grammar B extends A {
  X = &quot;your&quot;;
}
</code></pre></div></p>
</li>
<li>
<p>Advantage: Explicitely marks a nonterminal as <em>hole</em> (extension point) in the grammar. </p>
<ul>
<li>Please observe that interface terminals may or not may be meant to be 
 extended in sub-grammars. <code>external</code> is clearer here.</li>
</ul>
</li>
<li>Disadvantage: <ol>
<li>Leads to more objects in the AST. Both classes <code>a.X</code> and <code>b.X</code> are 
   instantiated and <code>a.X</code> only links to <code>b.X</code>.</li>
<li>Only one filling of the <code>hole</code> is possible.</li>
</ol>
</li>
</ul>
<h4 id="5-overriding-the-whole-production">5. Overriding the whole production.</h4>
<ul>
<li>If you don't want to add a hole at any possible place of extension:
<div class="highlight"><pre><span></span><code>component grammar A {  
  N = &quot;bla&quot; &quot;blubb&quot;;
}
grammar B extends A {
  @Override
  N = &quot;bla&quot; &quot;my&quot; &quot;blubb&quot; &quot;now&quot;;
}
</code></pre></div></li>
<li>Advantage: Compact definition. No "<em>framework thinking</em>" needed (no need
  to forecast all potential extension points)</li>
<li>Disadvantage:  <ol>
<li>The entire production is overriden (some redundancy). </li>
<li>Only one overriding alternative possible.  </li>
</ol>
</li>
<li>Combinations are possible. Dependent on the anticipated forms of 
  adaptations option 1, 2, 3 and 5 are in use.</li>
<li>Defined by: BR</li>
</ul>
<h3 id="avoid-empty-nonterminals-if-body-is-known">Avoid <strong>empty nonterminals</strong> (if body is known)</h3>
<ul>
<li>
<p>From the two variants:
<div class="highlight"><pre><span></span><code>A = &quot;bla&quot; B? C*;
B = &quot;B&#39;s body&quot; ;
C = &quot;C&#39;s body&quot; ;
</code></pre></div>
  and
<div class="highlight"><pre><span></span><code>A = &quot;bla&quot; B C;
B = (&quot;B&#39;s body&quot;)? ;
C = (&quot;C&#39;s body&quot;)* ;
</code></pre></div>
  we generally prefer the first one, i.e. add multiplicities when 
  using a nonterminal.   </p>
</li>
<li>
<p>This is a matter of taste, but useful to keep this consistent.  </p>
</li>
<li>Sometimes exceptions are useful.  </li>
<li>Defined by: SVa, BR  </li>
</ul>
<h3 id="avoid-complex-tokens-1">Avoid <strong>complex tokens</strong> (1)</h3>
<ul>
<li>The token definitions can only define regular expressions.
  Furthermore, the token parser (i.e. the lexer) does not consider backtracking.</li>
<li>If combinations of characters may be split into several token sequences
  this leads to problems. E.g. in <code>3-2</code> and <code>(-2)</code> the <code>-</code> has different roles.
  Unfortunately these problems also occur when composing languages
  that make excessive use of (conflicting) token definitions.</li>
<li>Solution: instead of defining a complex token like
<div class="highlight"><pre><span></span><code>  token NegativeNat = &quot;-&quot; Digits;
</code></pre></div>
  we split the token and allow individual parsing into nonterminals:
<div class="highlight"><pre><span></span><code>  NegativeNat = negative:[&quot;-&quot;] Digits {noSpace()}? 
</code></pre></div>
  (where we assume <code>Digits</code> is a given token).</li>
<li>
<p>As a workaround, we use the semantic predicate <code>{noSpace()}?</code> that ensures 
  that between the two last processed token there is no space inbetween. 
  If one of the tokens is optional we have to split the alternatives:
<div class="highlight"><pre><span></span><code>SignedNatLiteral = 
        (negative:[&quot;-&quot;]) Digits {noSpace()}? |
                         Digits;  
</code></pre></div></p>
</li>
<li>
<p>Adding a handcoded function like <code>getValue()</code> via <code>astrule</code> or the
  TOP-mechanism allows to use <code>SignedNatLiteral</code> like a token.</p>
</li>
<li><em>Scannerless parsing</em> is a principle where the tokens are reduced to simple
  characters (or character classes, such as <code>[a-z]</code>). Scannerless parsing
  generally avoids this kinds of problems, but is way slower.
  This kind of solution tries to mediate between the two extremes benefitting 
  from both approaches.</li>
<li>Defined by: MB, in: <code>MCCommonLiterals.mc4</code> and other literals grammars.</li>
</ul>
<h3 id="avoid-complex-tokens-2">Avoid <strong>complex tokens</strong> (2)</h3>
<ul>
<li>Same general problem. In language composition conflicting tokens may lead to issues.  </li>
<li>For example Java allows <code>42.</code> as a literal of type float. 
  UML allows to define cardinalities like <code>[42..44]</code>. Composition clashes.</li>
<li>
<p>Solution: In a Java sublanguage we split the token:
<div class="highlight"><pre><span></span><code>SignedBasicFloatLiteral =
   ... 
   | Digits &quot;.&quot; {noSpace()}? ... ;
</code></pre></div></p>
</li>
<li>
<p>This will ensure that <code>[42..44]</code> will be parsed like <code>[ 42 .. 44 ]</code> 
  in a language composition as well.</p>
</li>
<li>It generally seems that overly complex composed tokens may lead to issues 
  especially if the language allows compact models. Suboptimal tokens may be e.g.
  <code>"[["</code> (vs. nested lists), or
  <code>"&lt;-"</code> (vs. <code>3 &lt; -2</code>).</li>
<li>Defined by: MC team.</li>
</ul>
<h3 id="how-to-define-keyword-enumerations">How to define <strong>keyword enumerations</strong></h3>
<ul>
<li>A finite set of keyword-based alternatives can be defined in several forms:  </li>
<li>Standard three keywords act as alternative:
<div class="highlight"><pre><span></span><code>N = ([&quot;public&quot;] | [&quot;protected&quot;] | [&quot;private&quot;]) ;
</code></pre></div></li>
<li>Effects: <ol>
<li>not extensible without overriding and repetition</li>
<li>introduces boolean flags, where only one can be true at a time</li>
</ol>
</li>
<li>Use an enumeration nonterminal
<div class="highlight"><pre><span></span><code>enumeration E = &quot;public&quot; | &quot;protected&quot; | &quot;private&quot; ;
N = E ;
</code></pre></div></li>
<li>Effects: <ol>
<li>not extensible </li>
</ol>
</li>
<li>Use an interface and subclasses with almost empty body:
<div class="highlight"><pre><span></span><code>interface E ;
P1 implements E = &quot;public&quot;    ;
P2 implements E = &quot;protected&quot; ;
P3 implements E = &quot;private&quot;   ;
N = E ;
</code></pre></div></li>
<li>Effects: <ol>
<li>very extensible in various ways (even beyond mere keywords) </li>
<li>visitor can easily address the keywords (i.e. by <code>visit(P1)</code> ...)</li>
<li>Disadvantage: Clumsy notation and visitors are always needed.</li>
</ol>
</li>
<li>Defined by: SVa, BR.</li>
</ul>
<h3 id="common-ast-access-to-syntactically-similar-nonterminals">Common AST-Access to Syntactically Similar Nonterminals</h3>
<ul>
<li>
<p>Sometimes the following occurs (e.g. in associations of CDs or 
  interactions of SD):<br />
<div class="highlight"><pre><span></span><code>A = X Y Z;
B = Z Y X;
</code></pre></div></p>
</li>
<li>
<p>The concrete syntax differs (in order), but the syntactic concepts are 
    the same. </p>
</li>
<li>
<p>To allow common access, a common interface nonterminal is introduced
  that is not used in the grammar directly. 
  This doesn't change the concrete syntax but allows common AST access:
<div class="highlight"><pre><span></span><code>interface F = X Y Z;      // order is irrelevant
A implements F = X Y Z;
B implements F = Z Y X;
</code></pre></div></p>
</li>
<li>
<p>Defined by: BR.</p>
</li>
</ul>
<h3 id="how-and-when-to-use-names-for-nonterminals">How and when to use Names for Nonterminals</h3>
<ul>
<li>Normally names like <code>expr:Expr</code>can be avoided which makes a grammar easier to read
  and more concise, i.e. <code>Expr</code> alone has the same effect.</li>
<li>There may be two reasons to use a name:<ol>
<li>Nonterminal <code>X</code> occurs several times and we want to distinguish: 
 <code>left:Expr "*" right:Expr</code></li>
<li>We can also use the name to describe the purpose of the nonterminal, i.e.
<div class="highlight"><pre><span></span><code> MyVariable implements Variable = Name &quot;=&quot; initial:Expression;
</code></pre></div>
vs:
<div class="highlight"><pre><span></span><code> MyParameter implements Variable = Name &quot;=&quot; default:Expression;
</code></pre></div></li>
</ol>
</li>
<li>Defined by: BR.</li>
</ul>
<h2 id="further-information">Further Information</h2>
<ul>
<li><a href="https://github.com/MontiCore/monticore">Project root: MontiCore @github</a></li>
<li><a href="https://www.monticore.de/">MontiCore documentation</a></li>
<li><a href="https://github.com/MontiCore/monticore/blob/opendev/docs/Languages.md"><strong>List of languages</strong></a></li>
<li><a href="https://github.com/MontiCore/monticore/blob/opendev/monticore-grammar/src/main/grammars/de/monticore/Grammars.md"><strong>MontiCore Core Grammar Library</strong></a></li>
<li><a href="https://github.com/MontiCore/monticore/blob/opendev/docs/BestPractices.md">Best Practices</a></li>
<li><a href="https://www.se-rwth.de/publications/">Publications about MBSE and MontiCore</a></li>
<li><a href="https://github.com/MontiCore/monticore/blob/master/00.org/Licenses/LICENSE-MONTICORE-3-LEVEL.md">License definition</a></li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      (c) https://github.com/MontiCore/monticore
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "toc.integrate", "toc.follow", "content.tabs.link", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f13b1293.min.js"></script>
      
    
  </body>
</html>